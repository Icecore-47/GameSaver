<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Uploaded Models</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen flex flex-col items-center py-10 px-4">
  <div class="w-full max-w-4xl bg-white rounded-2xl shadow-lg p-6">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-bold">üìã Uploaded Models</h1>
      <a href="/"
         class="text-blue-600 hover:underline text-sm font-medium transition duration-150 ease-in-out">
        ‚¨ÖÔ∏è Back to Upload
      </a>
    </div>

    <div class="overflow-x-auto">
      <table class="min-w-full border border-gray-200 text-sm">
        <thead class="bg-blue-600 text-white uppercase">
          <tr>
            <th class="text-left px-4 py-2">Display Name</th>
            <th class="text-left px-4 py-2">Folder Name</th>
            <th class="text-left px-4 py-2">Build Name</th>
          </tr>
        </thead>
        <tbody id="modelsTableBody" class="bg-white divide-y divide-gray-200">
          <!-- Dynamic rows will be inserted here -->
        </tbody>
      </table>
    </div>

    <div id="emptyMessage" class="text-center text-gray-500 mt-6 hidden">
      No models found.
    </div>

    <div id="errorMessage" class="text-center text-red-600 mt-6 hidden">
      Failed to load models.
    </div>
  </div>

  <script>
    async function loadModels() {
      const tbody = document.getElementById('modelsTableBody');
      const emptyMsg = document.getElementById('emptyMessage');
      const errorMsg = document.getElementById('errorMessage');

      try {
        const res = await fetch('/models');
        const models = await res.json();

        if (!res.ok || !Array.isArray(models)) {
          throw new Error('Invalid response');
        }

        if (models.length === 0) {
          emptyMsg.classList.remove('hidden');
          return;
        }

        models.forEach(model => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td class="px-4 py-2">${model.DisplayName}</td>
            <td class="px-4 py-2">${model.FolderName}</td>
            <td class="px-4 py-2">${model.BuildName}</td>
          `;
          tbody.appendChild(row);
        });
      } catch (err) {
        errorMsg.classList.remove('hidden');
        console.error('‚ùå Error loading models:', err);
      }
    }

    loadModels();
  </script>
</body>
</html>
